{"version":3,"file":"scene01.js","sourceRoot":"","sources":["scene01.ts"],"names":[],"mappings":"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","sourcesContent":["/// <reference path=\"typings/index.d.ts\" />\nclass FontTest00{\n\n    public scene: THREE.Scene;\n    public camera: THREE.Camera;\n    private object:THREE.Line;\n    private uniforms:Object;\n\n    constructor(font) {\n\n        this.createScene( font );\n\n    }\n\n    // シーンを作る。ここでオブジェクトを格納していく。\n    private createScene(font){\n\n        // シーンを作る\n        this.scene = new THREE.Scene();\n\n        // カメラを作成\n        this.camera = new THREE.PerspectiveCamera( 75, window.innerWidth/window.innerHeight, 0.1, 10000 );\n        this.camera.position.z = 200;\n\n        this.uniforms = {\n            amplitude: { value: 5.0 },\n            opacity:   { value: 0.3 },\n            color:     { value: new THREE.Color( 0xff0000 ) }\n        };\n\n        let shaderMaterial = new THREE.ShaderMaterial({\n            uniforms:       this.uniforms,\n            vertexShader:   document.getElementById( 'vertexshader' ).textContent,\n            fragmentShader: document.getElementById( 'fragmentshader' ).textContent,\n            blending:       THREE.AdditiveBlending,\n            depthTest:      false,\n            transparent:    true\n        });\n\n        let geometry = new THREE.TextGeometry( 'three.js', {\n            font: font,\n            size: 50,\n            height: 15,\n            curveSegments: 10,\n            bevelThickness: 1,\n            bevelSize: 1,\n            bevelEnabled: false,\n            // bevelSegments: 1,\n            // steps: 40\n        } );\n\n\n\n        geometry.center();\n        let vertices = geometry.vertices;\n        let buffergeometry = new THREE.BufferGeometry();\n\n        let position = new THREE.Float32BufferAttribute(vertices.length * 3, 3).copyVector3sArray( vertices );\n        buffergeometry.addAttribute( 'position', position );\n\n        let displacement = new THREE.Float32BufferAttribute( vertices.length * 3, 3 );\n        buffergeometry.addAttribute( 'displacement', displacement );\n\n        let customColor = new THREE.Float32BufferAttribute( vertices.length * 3, 3 );\n        buffergeometry.addAttribute( 'customColor', customColor );\n\n        let color = new THREE.Color( 0xffffff );\n\n\n        for( var i = 0, l = customColor.count; i < l; i ++ ) {\n            color.setHSL( i / l, 0.5, 0.5 );\n            color.toArray( customColor.array, i * customColor.itemSize );\n        }\n        this.object = new THREE.Line( buffergeometry, shaderMaterial );\n        this.object.rotation.x = 0.2;\n        this.scene.add( this.object );\n\n    }\n\n    // ワンフレームごとの処理\n    public update() {\n        var time = Date.now() * 0.001;\n        this.object.rotation.y = 0.25 * time;\n        this.uniforms.amplitude.value = Math.sin( 0.5 * time );\n        this.uniforms.color.value.offsetHSL( 0.0005, 0, 0 );\n        var attributes = this.object.geometry.attributes;\n        var array = attributes.displacement.array;\n        for ( var i = 0, l = array.length; i < l; i += 3 ) {\n            array[ i     ] += 0.3 * ( 0.5 - Math.random() );\n            array[ i + 1 ] += 0.3 * ( 0.5 - Math.random() );\n            array[ i + 2 ] += 0.3 * ( 0.5 - Math.random() );\n        }\n        attributes.displacement.needsUpdate = true;\n    }\n\n\n}\n\n\n"]}