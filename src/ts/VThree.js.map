{"version":3,"file":"VThree.js","sourceRoot":"","sources":["VThree.ts"],"names":[],"mappings":"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","sourcesContent":["/// <reference path=\"typings/index.d.ts\" />\n\nclass VThree\n{\n\n    // 現在のシーンの番号\n    public NUM:number = 0;\n    // シーンを格納する配列\n    public scenes:any[] = [];\n    // Renderer\n    public renderer:THREE.WebGLRenderer;\n    private controls:Object;\n\n    private isOrbitControls:boolean = false;\n    constructor()\n    {\n\n\n        // 初期化処理後、イベント登録\n        this.init();\n\n        window.addEventListener( 'resize', this.onWindowResize, false );\n        window.addEventListener( 'click', this.onClick, false );\n        document.addEventListener(\"keydown\", this.onKeyDown, true);\n        document.addEventListener(\"keyup\", this.onKeyUp, true);\n\n\n    }\n\n    public enableOrbitControls()\n    {\n\n    }\n\n    public initOrbitContorols()\n    {\n\n    }\n\n\n    // test\n\n    public init()\n    {\n\n        // Rendererを作る\n        this.renderer = new THREE.WebGLRenderer({antialias: true});\n        this.renderer.setPixelRatio( window.devicePixelRatio );\n        this.renderer.setSize( window.innerWidth, window.innerHeight );\n        this.renderer.sortObjects = false;\n        this.renderer.shadowMap.enabled = true;\n        this.renderer.shadowMap.type = THREE.BasicShadowMap;\n        this.renderer.domElement.id = \"main\";\n        document.body.appendChild( this.renderer.domElement );\n\n    }\n\n    // 管理したいシーンを格納する関数\n\n    public addScene(scene:Object)\n    {\n\n        this.scenes.push(scene);\n\n    }\n\n\n    // ウィンドウの幅が変わったときの処理\n    public onWindowResize = () =>\n    {\n        var windowHalfX = window.innerWidth / 2;\n        var windowHalfY = window.innerHeight / 2;\n        this.scenes[this.NUM].camera.aspect = window.innerWidth / window.innerHeight;\n        this.scenes[this.NUM].camera.updateProjectionMatrix();\n        this.renderer.setSize( window.innerWidth, window.innerHeight );\n\n        console.log(\"resize\");\n    }\n\n    // 現在のシーン番号が、不適切な値にならないようにチェック\n    public checkNum = () =>\n    {\n        if(this.NUM <0)\n        {\n            this.NUM = this.scenes.length-1;\n        }\n\n        if(this.NUM >= this.scenes.length)\n        {\n            this.NUM = 0;\n        }\n\n    }\n\n    public  onClick = () => {\n        this.scenes[this.NUM].click();\n    }\n    // ←→キーでシーン番号を足し引き\n\n    public onKeyUp = (e:KeyboardEvent) => {\n        this.scenes[this.NUM].keyUp(e);\n    }\n\n    public onKeyDown = (e:KeyboardEvent) => {\n\n        console.log(e);\n        // console.log(this.NUM);\n        if(e.key == \"ArrowRight\")\n        {\n            this.NUM++;\n            this.checkNum();\n        }\n        if( e.key == \"ArrowLeft\")\n        {\n\n            this.NUM--;\n            this.checkNum();\n        }\n\n        console.log(this.NUM);\n        this.scenes[this.NUM].keyDown(e);\n\n    }\n\n    // 最終的な描写処理と、アニメーション関数をワンフレームごとに実行\n    public draw() {\n\n        this.scenes[this.NUM].update();\n        this.renderer.render(this.scenes[this.NUM].scene, this.scenes[this.NUM].camera);\n        requestAnimationFrame(this.draw.bind(this));\n\n    }\n}\n\n"]}